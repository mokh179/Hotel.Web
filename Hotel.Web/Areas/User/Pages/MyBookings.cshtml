@page
@model Hotel.Web.Areas.User.Pages.MyBookingsModel
<link rel="stylesheet" href="~/css/User/mybookings.css" asp-append-version="true" />

<h2 class="title">My Bookings</h2>

@if (Model.Bookings == null || Model.Bookings.Count == 0)
{
    <p>You have no bookings yet.</p>
}
else
{
    <div class="booking-list">
        @foreach (var b in Model.Bookings)
        {
            <div class="booking-card">
                <div class="info">
                    <h3 class="hotel">@b.HotelName</h3>
                    <p class="room"><b>Room:</b> @b.RoomId</p>
                    <p><b>Check-in:</b> @b.DateRange.From.ToShortDateString()</p>
                    <p><b>Check-out:</b> @b.DateRange.To.ToShortDateString()</p>

                    @if (b.DateRange.From < DateTime.UtcNow)
                    {
                        <span class="past-status">Completed</span>
                    }
                    else
                    {
                        <span class="active-status">Active</span>
                    }
                </div>

                @if (b.DateRange.From >= DateTime.UtcNow)
                {
                    <form method="post" asp-page-handler="Cancel" asp-route-id="@b.Id">
                        <button class="cancel-btn">Cancel Booking</button>
                    </form>
                }
            </div>
        }
    </div>
}
